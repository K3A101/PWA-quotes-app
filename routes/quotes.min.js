const express=require("express");const request=require("request");const axios=require("axios");const router=express.Router();router.get("/",(req,res)=>{request("https://opensheet.elk.sh/14joQ9h8M0ydoJJ-fNYN68ls3TWPCvk8ZvBJvUXpF1cQ/sheet1",{json:true},(err,requestRes,body)=>{if(err){res.send(err)}else{res.render("index",{title:"Home",pageTitle:"Design quotes"})}})});router.get("/quotes",(req,res)=>{request("https://opensheet.elk.sh/14joQ9h8M0ydoJJ-fNYN68ls3TWPCvk8ZvBJvUXpF1cQ/sheet1",{json:true},(err,requestRes,body)=>{if(err){res.send(err)}else{res.render("quotes",{title:"Quotes",pageTitle:"All the quotes",quoteData:body})}})});router.get("/about",(req,res)=>{res.render("about",{title:"About",pageTitle:"About Design Quotes"})});router.get("/quotes/:id",function(req,res){const id=req.params.id;const API_URL=`https://opensheet.elk.sh/14joQ9h8M0ydoJJ-fNYN68ls3TWPCvk8ZvBJvUXpF1cQ/sheet1/`;axios.get(API_URL).then(function(response){const quotes=response.data;const quote=quotes.find(quote=>quote.id===id);if(quote){res.render("quote",{title:`Quote ${id}`,pageTitle:`Quote ${id}`,quoteData:quote})}else{res.status(404).send("Quote not found")}}).catch(function(error){console.error(error);res.send(error)})});module.exports=router;